(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{56:function(e,t,n){},57:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var s=n(26),r=n.n(s),c=n(7),a=(n(56),n(0)),o=n.n(a),i=n(9),l=n(6),j=n(20),d=n(42);function u(e){var t=Object(a.useState)(e),n=Object(c.a)(t,2),s=n[0],r=n[1];return[s,function(e){r(Object(d.a)(Object(d.a)({},s),{},{[e.target.id]:e.target.value}))}]}n(57);var b=n(11),h=n.n(b),O=function(e){var t=document.cookie&&document.cookie.split("; ").find((function(t){return t.startsWith(e+"=")})).split("=")[1];return t.length>0?t:null},m="https://fast-falls-96051.herokuapp.com/",x=n(1);function f(){var e=Object(i.f)(),t=Object(a.useState)(""),n=Object(c.a)(t,2),s=n[0],r=n[1],o=u({username:"",password:""}),d=Object(c.a)(o,2),b=d[0],O=d[1];return Object(x.jsxs)("div",{className:"Login",children:[Object(x.jsxs)(l.a,{onSubmit:function(t){t.preventDefault(),console.log("subited");var n={username:b.username,password:b.password};h.a.post(m+"users/login",n).then((function(t){t.data.error?(r(t.data.error),console.log("error",t.data)):(console.log("OK",t.data),document.cookie="user_id="+t.data.userid,document.cookie="username="+b.username,e.push("/"))}),(function(e){return alert("Some error occured. "+e)})),console.log("what is happening")},children:[Object(x.jsxs)(l.a.Group,{size:"lg",controlId:"username",children:[Object(x.jsx)(l.a.Label,{children:"Username"}),Object(x.jsx)(l.a.Control,{autoFocus:!0,type:"text",value:b.username,onChange:O})]}),Object(x.jsxs)(l.a.Group,{size:"lg",controlId:"password",children:[Object(x.jsx)(l.a.Label,{children:"Password"}),Object(x.jsx)(l.a.Control,{type:"password",value:b.password,onChange:O})]}),Object(x.jsx)(j.a,{block:!0,size:"lg",type:"submit",disabled:!(b.username.length>0&&b.password.length>0),children:"Login"})]}),Object(x.jsx)("span",{children:s})]})}var g={username:"",password:"",confirmPassword:"",firstname:"",lastname:""};function v(){var e=u(g),t=Object(c.a)(e,2),n=t[0],s=t[1],r=Object(i.f)();function a(e){e.preventDefault();var t={username:n.username,password:n.password,firstname:n.firstname,lastname:n.lastname};h.a.post(m+"users/register",t).then((function(e){if(console.log(e),2===parseInt(e.status/100))r.push("/login");else{var t="Some error occured. Try after some time!";401===e.status&&(t="User with the email already exists"),alert(t),r.push("/signup")}}),(function(e){return console.log(e)}))}return Object(x.jsx)("div",{className:"Signup",children:Object(x.jsxs)(l.a,{onSubmit:a,children:[Object(x.jsxs)(l.a.Group,{controlId:"firstname",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"First Name"}),Object(x.jsx)(l.a.Control,{autoFocus:!0,type:"text",value:n.firstname,onChange:s})]}),Object(x.jsxs)(l.a.Group,{controlId:"lastname",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"Last Name"}),Object(x.jsx)(l.a.Control,{type:"text",value:n.lastname,onChange:s})]}),Object(x.jsxs)(l.a.Group,{controlId:"username",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"Username"}),Object(x.jsx)(l.a.Control,{type:"text",value:n.username,onChange:s})]}),Object(x.jsxs)(l.a.Group,{controlId:"password",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"Password"}),Object(x.jsx)(l.a.Control,{type:"password",value:n.password,onChange:s})]}),Object(x.jsxs)(l.a.Group,{controlId:"confirmPassword",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"Confirm Password"}),Object(x.jsx)(l.a.Control,{type:"password",onChange:s,value:n.confirmPassword})]}),Object(x.jsx)(j.a,{block:!0,size:"lg",type:"submit",disabled:!(n.username.length>0&&n.password.length>0&&n.firstname.length>0&&n.password===n.confirmPassword),children:"Signup"})]})})}var p=n(31),w=n(32),y=n(25),S=n(10),N=["Read More","Show less"],C=[1,2,3,4,5,6,7,8,9,10],L=function(e){var t=u({rating:1,review:""}),n=Object(c.a)(t,2),s=n[0],r=n[1],a=o.a.useState(!1),i=Object(c.a)(a,2),j=i[0],d=i[1];return Object(x.jsxs)(l.a,{children:[Object(x.jsxs)(l.a.Group,{controlId:"rating",children:[Object(x.jsx)(l.a.Label,{children:"Your rating"}),Object(x.jsx)(l.a.Control,{size:"sm",as:"select",onChange:r,value:s.rating,children:C.map((function(e){return Object(x.jsx)("option",{children:e})}))})]}),Object(x.jsxs)(l.a.Group,{controlId:"review",children:[Object(x.jsx)(l.a.Label,{children:"Your Review"}),Object(x.jsx)(l.a.Control,{as:"textarea",rows:2,onChange:r,value:s.review})]}),Object(x.jsx)(S.a.Link,{onClick:function(){d(!0);var t={userid:O("user_id"),movieid:parseInt(e.movieId),rating:s.rating,review:s.review};console.log(t),console.log(typeof t.movieid),console.log(typeof t.rating),console.log(typeof t.review),h.a.post(m+"users/addmovie",t).then((function(e){d(!1),e.data.error?alert(e.data.error):alert("Successfully added")}),(function(e){return alert("Some error occured try after some time")})).catch((function(e){return console.log(e)})),console.log(s.rating),console.log(s.review)},children:"Add to list"}),j&&Object(x.jsx)(p.a,{animation:"border"})]})},k=function(e){if(!e.movie)return Object(x.jsx)("div",{children:"Nothing to Show"});var t,n,s=e.movie.poster_url,r="",a="";e.movie&&e.movie.genres&&e.movie.genres.map((function(e,t){a+=t?", "+e:e}));var i=e.movie?e.movie.overview:"";t=i.length,n=i.substr(0,Math.min(70,t)),t>70&&(r=i.substr(70,t-70+1));var l=o.a.useState(1),j=Object(c.a)(l,2),d=j[0],u=j[1];return Object(x.jsxs)(S.a,{style:{width:"18rem",marginTop:"1rem"},children:[Object(x.jsx)(S.a.Img,{variant:"top",src:s,style:{height:"12rem",objectFit:"cover"}}),Object(x.jsxs)(S.a.Body,{children:[Object(x.jsxs)(S.a.Title,{children:[e.movie.title," (",e.movie.release_date,")"]}),Object(x.jsx)(S.a.Subtitle,{className:"mb-2 text-muted",children:a}),Object(x.jsx)(S.a.Subtitle,{className:"mb-2 text-muted",children:e.movie.language}),Object(x.jsxs)(S.a.Text,{children:[n+(d?"":r),Object(x.jsx)(S.a.Link,{onClick:function(){return u(1-d)},children:N[1-d]})]}),e.show&&Object(x.jsx)(L,{movieId:e.movie.id}),!e.show&&Object(x.jsxs)(S.a.Text,{children:["Your Score : ",e.rating]}),!e.show&&Object(x.jsxs)(S.a.Text,{children:["Your Review : ",e.review]})]})]})},_=function(){var e=u({movieName:""}),t=Object(c.a)(e,2),n=t[0],s=t[1],r=Object(i.f)(),d=o.a.useState([]),b=Object(c.a)(d,2),f=b[0],g=b[1],v=o.a.useState(!1),S=Object(c.a)(v,2),N=S[0],C=S[1];Object(a.useEffect)((function(){var e=O("user_id");e?console.log("inside",e):r.push("/login")}),[]);return Object(x.jsxs)("div",{children:[Object(x.jsxs)(l.a,{onSubmit:function(e){e.preventDefault(),console.log(n.movieName),C(!0);var t=m+"movies/search/"+n.movieName;h.a.get(t).then((function(e){console.log(e),g(e.data),C(!1)}),(function(e){console.log(e)}))},children:[Object(x.jsxs)(l.a.Group,{controlId:"movieName",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"Enter the Movie Name"}),Object(x.jsx)(l.a.Control,{autoFocus:!0,type:"text",value:n.movieName,onChange:s})]}),Object(x.jsx)(j.a,{type:"submit",disabled:!(n.movieName.length>0),children:"Search"}),N&&Object(x.jsx)(p.a,{animation:"border"})]}),Object(x.jsx)("div",{children:Object(x.jsx)(w.a,{children:f&&f.length>0&&f.map((function(e){return Object(x.jsx)(y.a,{xs:6,md:4,children:Object(x.jsx)(k,{movie:e,show:!0})})}))})})]})};function I(){return Object(x.jsx)("div",{className:"NotFound text-center",children:Object(x.jsx)("h3",{children:"Sorry, page not found!"})})}var z=function(){var e=Object(i.f)(),t="/"+O("username");return O("user_id")?location.href=t:e.push("/login"),Object(x.jsx)("div",{children:"Not to be displayed"})},F=n(13),T=n(33),E=function(){var e=Object(i.g)().username,t=o.a.useState([]),n=Object(c.a)(t,2),s=n[0],r=n[1];o.a.useEffect((function(){console.log(typeof e);var t=m+"users/"+e+"/followers";h.a.get(t).then((function(e){console.log(e),r(e.data)}),(function(e){return console.log(e)}))}),[]);return Object(x.jsx)("div",{children:Object(x.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"#"}),Object(x.jsx)("th",{children:"First Name"}),Object(x.jsx)("th",{children:"Last Name"}),Object(x.jsx)("th",{children:"Username"})]})}),Object(x.jsx)("tbody",{children:s&&s.map((function(e,t){var n="/"+e.username;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t+1}),Object(x.jsx)("td",{children:e.firstname}),Object(x.jsx)("td",{children:e.lastname}),Object(x.jsx)("td",{children:Object(x.jsx)(F.b,{to:n,children:e.username})})]})}))})]})})},G=function(){var e=Object(i.g)().username,t=o.a.useState([]),n=Object(c.a)(t,2),s=n[0],r=n[1];o.a.useEffect((function(){console.log(typeof e);var t=m+"users/"+e+"/following";h.a.get(t).then((function(e){console.log(e),r(e.data)}),(function(e){return console.log(e)}))}),[]);return Object(x.jsxs)("div",{children:["Following",Object(x.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"#"}),Object(x.jsx)("th",{children:"First Name"}),Object(x.jsx)("th",{children:"Last Name"}),Object(x.jsx)("th",{children:"Username"})]})}),Object(x.jsx)("tbody",{children:s&&s.map((function(e,t){var n="/"+e.username;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t+1}),Object(x.jsx)("td",{children:e.firstname}),Object(x.jsx)("td",{children:e.lastname}),Object(x.jsx)("td",{children:Object(x.jsx)(F.b,{to:n,children:e.username})})]})}))})]})]})},M=function(){var e=Object(i.g)().username,t=o.a.useState([]),n=Object(c.a)(t,2),s=n[0],r=n[1],a=o.a.useState(1),l=Object(c.a)(a,2),j=l[0],d=l[1],u=o.a.useState(0),b=Object(c.a)(u,2),O=b[0],f=b[1],g=o.a.useState(I),v=Object(c.a)(g,2),p=v[0],S=v[1],N=o.a.useState("Time"),C=Object(c.a)(N,2),L=C[0],_=C[1],I={username:e,firstname:"",lastname:"",movies_count:0,followers_count:0,following_count:0};return o.a.useEffect((function(){p&&(0===p.movies_count?f(0):f(parseInt(p.movies_count/10)+(p.movies_count%10!==0)))}),[p]),o.a.useEffect((function(){var t=m+"users/"+e;h.a.get(t).then((function(e){S(e.data[0])}),(function(e){return console.log(e)}))}),[]),o.a.useEffect((function(){console.log("orderby ",L);var t=m+"users/"+e+"/movielist?offset="+10*(j-1)+"&orderby="+L.toLowerCase();h.a.get(t).then((function(e){r(e.data)}),(function(e){console.log(e)}))}),[j,L]),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("h1",{style:{fontSize:"200%"},children:[p?p.firstname+" "+p.lastname:""," "]}),Object(x.jsxs)("h5",{style:{fontSize:"100%"},children:["@",p?p.username:""]})]}),Object(x.jsxs)("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(x.jsx)("h2",{style:{fontSize:"200%"},children:p?p.movies_count:0}),Object(x.jsx)("h4",{style:{fontSize:"100%"},children:"Movies"})]}),Object(x.jsxs)("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(x.jsx)("a",{href:(p?p.username:"")+"/followers",children:Object(x.jsx)("h2",{style:{fontSize:"200%"},children:p?p.followers_count:0})}),Object(x.jsx)("h4",{style:{fontSize:"100%"},children:"Followers"})]}),Object(x.jsxs)("div",{style:{marginLeft:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(x.jsxs)("a",{href:(p?p.username:"")+"/following",children:[Object(x.jsx)("h2",{style:{fontSize:"200%"},children:p?p.following_count:0})," "]}),Object(x.jsx)("h4",{style:{fontSize:"100%"},children:"Following"})]})]}),Object(x.jsx)("div",{style:{margin:"1rem 0",width:"100%",overflow:"hidden"},children:Object(x.jsx)("button",{className:"orderby-btn",onClick:function(){_("Time"===L?"Rating":"Time")},style:{backgroundColor:"".concat("Time"===L?"#00bfff":"#0186b3")},children:L})}),Object(x.jsx)(w.a,{children:s&&s.length>0&&s.map((function(e){return Object(x.jsx)(y.a,{xs:12,md:4,children:Object(x.jsx)(k,{movie:e.movie,show:!1,review:e.review,rating:e.rating})})}))}),O>0&&Object(x.jsxs)("div",{className:"page-container",children:[Object(x.jsx)("button",{className:"arrow-btn",disabled:1===j,onClick:function(){d((function(e){return e-1}))},children:Object(x.jsx)("i",{class:"fas fa-angle-left"})})," Page ",Object(x.jsx)("input",{type:"text",inputmode:"numeric",value:j})," of "," ",O," "," ",Object(x.jsx)("button",{className:"arrow-btn",disabled:j===O,onClick:function(){d((function(e){return e+1}))},children:Object(x.jsx)("i",{class:"fas fa-angle-right"})})]})]})},P=function(){o.a.useEffect((function(){var e=O("user_id");e?console.log("inside",e):r.push("/login")}),[]);var e=u({userName:""}),t=Object(c.a)(e,2),n=t[0],s=t[1],r=Object(i.f)(),a=o.a.useState(!1),d=Object(c.a)(a,2),b=d[0],f=d[1],g=o.a.useState([]),v=Object(c.a)(g,2),p=v[0],w=v[1];return Object(x.jsxs)("div",{children:[Object(x.jsxs)(l.a,{onSubmit:function(e){e.preventDefault(),console.log(n.userName);var t=m+"users/"+n.userName;h.a.get(t).then((function(e){console.log(e.data),e.data.length>0?(w(e.data[0]),f(!0)):alert("No users found")}),(function(e){alert("Some error occured ! Try after some time"),console.log(e)}))},children:[Object(x.jsxs)(l.a.Group,{controlId:"userName",size:"lg",children:[Object(x.jsx)(l.a.Label,{children:"Enter the User Name"}),Object(x.jsx)(l.a.Control,{autoFocus:!0,type:"text",value:n.userName,onChange:s})]}),Object(x.jsx)(j.a,{type:"submit",disabled:!(n.userName.length>0),children:"Search"})]}),b&&Object(x.jsx)("div",{children:Object(x.jsxs)(S.a,{children:[Object(x.jsxs)(S.a.Header,{children:["@",p.username]}),Object(x.jsxs)(S.a.Body,{children:[Object(x.jsxs)(S.a.Title,{children:[p.firstname," ",p.lastname]}),Object(x.jsxs)(S.a.Text,{children:["Movies : ",p.movies_count]}),Object(x.jsxs)(S.a.Text,{children:["Followers : ",p.followers_count]}),Object(x.jsxs)(S.a.Text,{children:["Following : ",p.following_count]}),Object(x.jsx)(j.a,{variant:"primary",onClick:function(){var e="";p&&(e=p.username);var t=O("user_id");h.a.post("https://fast-falls-96051.herokuapp.com/users/follow",{userid:t,username:e}).then((function(e){e.data.error?alert(e.data.error):alert("Added successfully !"),console.log(e)}),(function(e){return console.log(e)}))},children:"Follow"})]})]})})]})};function D(){return Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{exact:!0,path:"/",children:Object(x.jsx)(z,{})}),Object(x.jsx)(i.a,{path:"/:username/followers",children:Object(x.jsx)(E,{})}),Object(x.jsx)(i.a,{path:"/:username/following",children:Object(x.jsx)(G,{})}),Object(x.jsx)(i.a,{path:"/addmovie",children:Object(x.jsx)(_,{})}),Object(x.jsx)(i.a,{path:"/login",children:Object(x.jsx)(f,{})}),Object(x.jsx)(i.a,{path:"/signup",children:Object(x.jsx)(v,{})}),Object(x.jsx)(i.a,{path:"/addfollower",children:Object(x.jsx)(P,{})}),Object(x.jsx)(i.a,{path:"/:username",children:Object(x.jsx)(M,{})}),Object(x.jsx)(i.a,{children:Object(x.jsx)(I,{})})]})}var U=n(27),A=n(24);function B(){var e=o.a.useState(!1),t=Object(c.a)(e,2),n=t[0],s=t[1],r=Object(i.f)();o.a.useEffect((function(){O("user_id")?s(!0):s(!1),console.log("hojo")}),[]);return Object(x.jsxs)("div",{className:"App container py-3",children:[Object(x.jsxs)(U.a,{collapseOnSelect:!0,bg:"light",expand:"md",className:"mb-3",children:[Object(x.jsx)(U.a.Brand,{href:"/",className:"font-weight-bold text-muted",children:"My Movie List"}),Object(x.jsx)(U.a.Toggle,{}),Object(x.jsx)(U.a.Collapse,{className:"justify-content-end",children:Object(x.jsxs)(A.a,{children:[!n&&Object(x.jsx)(A.a.Link,{href:"/signup",children:"Signup"}),!n&&Object(x.jsx)(A.a.Link,{href:"/login",children:"Login"}),n&&Object(x.jsx)(A.a.Link,{href:"/addfollower",children:"Find Friend"}),n&&Object(x.jsx)(A.a.Link,{href:"/addmovie",children:"Add Movie"}),n&&Object(x.jsx)(A.a.Link,{onClick:function(){s(!1),document.cookie="user_id=",document.cookie="username=",r.push("/login")},children:"Logout"})]})})]}),Object(x.jsx)(D,{})]})}var R=document.getElementById("root");r.a.render(Object(x.jsx)(F.a,{children:Object(x.jsx)(B,{})}),R)}},[[86,1,2]]]);
//# sourceMappingURL=main.2ceabc96.chunk.js.map