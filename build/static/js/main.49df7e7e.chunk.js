(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{100:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),r=s(23),a=s.n(r),o=s(20),i=s(26),l={status:"failure",user:{}};var j=Object(i.combineReducers)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER":var s=Object.assign({},e,{status:t.status,user:t.data});return s;case"LOG_OUT":var n=Object.assign({},e,{status:"failure",user:{}});return n;default:return e}}}),d=s(7),u=(s(73),s(9)),h=s(6),b=s(21),O=s(49);function x(e){var t=Object(n.useState)(e),s=Object(d.a)(t,2),c=s[0],r=s[1];return[c,function(e){r(Object(O.a)(Object(O.a)({},c),{},{[e.target.id]:e.target.value}))}]}s(74);var m=s(11),f=s.n(m);var g=function(e){var t=document.cookie&&document.cookie.split("; ").find((function(t){return t.startsWith(e+"=")})).split("=")[1];return t.length>0?t:null},v="https://fast-falls-96051.herokuapp.com/",p=s(1);function w(){var e=Object(u.f)(),t=Object(o.b)(),s=x({username:"",password:""}),n=Object(d.a)(s,2),c=n[0],r=n[1];return Object(p.jsx)("div",{className:"Login",children:Object(p.jsxs)(h.a,{onSubmit:function(s){s.preventDefault(),console.log("subited");var n={username:c.username,password:c.password};f.a.post(v+"users/login",n).then((function(s){console.log(s),200===s.status?(console.log(s.data),t({type:"FETCH_USER",status:"success",data:s.data}),document.cookie="user_id="+s.data.userid,document.cookie="username="+c.username,e.push("/")):(alert(s.data),console.log("failure"),e.push("/login"))}),(function(e){return alert("Some error occured. "+e)})),console.log("what is happening")},children:[Object(p.jsxs)(h.a.Group,{size:"lg",controlId:"username",children:[Object(p.jsx)(h.a.Label,{children:"Username"}),Object(p.jsx)(h.a.Control,{autoFocus:!0,type:"text",value:c.username,onChange:r})]}),Object(p.jsxs)(h.a.Group,{size:"lg",controlId:"password",children:[Object(p.jsx)(h.a.Label,{children:"Password"}),Object(p.jsx)(h.a.Control,{type:"password",value:c.password,onChange:r})]}),Object(p.jsx)(b.a,{block:!0,size:"lg",type:"submit",disabled:!(c.username.length>0&&c.password.length>0),children:"Login"})]})})}var y={username:"",password:"",confirmPassword:"",firstname:"",lastname:""};function L(){var e=x(y),t=Object(d.a)(e,2),s=t[0],n=t[1],c=Object(u.f)();function r(e){e.preventDefault();var t={username:s.username,password:s.password,firstname:s.firstname,lastname:s.lastname};f.a.post(v+"users/register",t).then((function(e){if(console.log(e),200===e.status)console.log("suceess"),c.push("/login");else{var t="Some error occured. Try after some time!";401===e.status&&(t="User with the email already exists"),alert(t),console.log("failure"),c.push("/signup")}}),(function(e){return console.log(e)}))}return Object(p.jsx)("div",{className:"Signup",children:Object(p.jsxs)(h.a,{onSubmit:r,children:[Object(p.jsxs)(h.a.Group,{controlId:"firstname",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"First Name"}),Object(p.jsx)(h.a.Control,{autoFocus:!0,type:"text",value:s.firstname,onChange:n})]}),Object(p.jsxs)(h.a.Group,{controlId:"lastname",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"Last Name"}),Object(p.jsx)(h.a.Control,{type:"text",value:s.lastname,onChange:n})]}),Object(p.jsxs)(h.a.Group,{controlId:"username",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"Username"}),Object(p.jsx)(h.a.Control,{type:"text",value:s.username,onChange:n})]}),Object(p.jsxs)(h.a.Group,{controlId:"password",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"Password"}),Object(p.jsx)(h.a.Control,{type:"password",value:s.password,onChange:n})]}),Object(p.jsxs)(h.a.Group,{controlId:"confirmPassword",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"Confirm Password"}),Object(p.jsx)(h.a.Control,{type:"password",onChange:n,value:s.confirmPassword})]}),Object(p.jsx)(b.a,{block:!0,size:"lg",type:"submit",disabled:!(s.username.length>0&&s.password.length>0&&s.firstname.length>0&&s.password===s.confirmPassword),children:"Signup"})]})})}var S=s(27),C=s(19),N=s(10),k=["Read More","Show less"],_=[1,2,3,4,5,6,7,8,9,10],I=function(e){var t=x({rating:1,review:""}),s=Object(d.a)(t,2),n=s[0],c=s[1];return Object(p.jsxs)(h.a,{children:[Object(p.jsxs)(h.a.Group,{controlId:"rating",children:[Object(p.jsx)(h.a.Label,{children:"Your rating"}),Object(p.jsx)(h.a.Control,{as:"select",onChange:c,value:n.rating,children:_.map((function(e){return Object(p.jsx)("option",{children:e})}))})]}),Object(p.jsxs)(h.a.Group,{controlId:"review",children:[Object(p.jsx)(h.a.Label,{children:"Your Review"}),Object(p.jsx)(h.a.Control,{as:"textarea",rows:2,onChange:c,value:n.review})]}),Object(p.jsx)(N.a.Link,{onClick:function(){var t={userid:g("user_id"),movieid:parseInt(e.movieId),rating:n.rating,review:n.review};console.log(t),console.log(typeof t.movieid),console.log(typeof t.rating),console.log(typeof t.review),f.a.post(v+"users/addmovie",t).then((function(e){console.log("successfully added")}),(function(e){return alert("Some error occured")})).catch((function(e){return console.log(e)})),console.log(n.rating),console.log(n.review)},children:"Add to list"})]})},F=function(e){var t,s,n=e.movie.poster_url,r="",a="";e.movie.genres.map((function(e,t){a+=t?", "+e:e})),t=e.movie.overview.length,s=e.movie.overview.substr(0,Math.min(70,t)),t>70&&(r=e.movie.overview.substr(70,t-70+1));var o=c.a.useState(1),i=Object(d.a)(o,2),l=i[0],j=i[1];return Object(p.jsxs)(N.a,{bg:"dark",text:"light",style:{width:"18rem",marginTop:"1rem"},children:[Object(p.jsx)(N.a.Img,{variant:"top",src:n,style:{height:"150px",objectFit:"cover"}}),Object(p.jsxs)(N.a.Body,{children:[Object(p.jsxs)(N.a.Title,{children:[e.movie.title," (",e.movie.release_date,")"]}),Object(p.jsx)(N.a.Subtitle,{className:"mb-2 text-muted",children:a}),Object(p.jsx)(N.a.Subtitle,{className:"mb-2 text-muted",children:e.movie.language}),Object(p.jsxs)(N.a.Text,{children:[s+(l?"":r),Object(p.jsx)(N.a.Link,{onClick:function(){return j(1-l)},children:k[1-l]})]}),e.show&&Object(p.jsx)(I,{movieId:e.movie.id}),!e.show&&Object(p.jsxs)(N.a.Text,{children:["Your Score : ",e.rating]}),!e.show&&Object(p.jsxs)(N.a.Text,{children:["Your Review : ",e.review]})]})]})},T=function(){var e=x({movieName:""}),t=Object(d.a)(e,2),s=t[0],r=t[1],a=Object(u.f)(),o=c.a.useState([]),i=Object(d.a)(o,2),l=i[0],j=i[1];Object(n.useEffect)((function(){var e=g("user_id");e?console.log("inside",e):a.push("/login")}),[]);return Object(p.jsxs)("div",{children:[Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),console.log(s.movieName);var t=v+"movies/search/"+s.movieName;f.a.get(t).then((function(e){console.log(e.data),j(e.data)}),(function(e){console.log(e)}))},children:[Object(p.jsxs)(h.a.Group,{controlId:"movieName",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"Enter the Movie Name"}),Object(p.jsx)(h.a.Control,{autoFocus:!0,type:"text",value:s.movieName,onChange:r})]}),Object(p.jsx)(b.a,{type:"submit",disabled:!(s.movieName.length>0),children:"Search"})]}),Object(p.jsx)("div",{children:Object(p.jsx)(S.a,{children:l&&l.length>0&&l.map((function(e){return Object(p.jsx)(C.a,{xs:6,md:4,children:Object(p.jsx)(F,{movie:e,show:!0})})}))})})]})};function G(){return Object(p.jsx)("div",{className:"NotFound text-center",children:Object(p.jsx)("h3",{children:"Sorry, page not found!"})})}var E=function(){var e=c.a.useState([]),t=Object(d.a)(e,2),s=t[0],n=(t[1],c.a.useState({})),r=Object(d.a)(n,2),a=r[0],o=(r[1],Object(u.f)()),i=g("username");return g("user_id")?o.push(i):o.push("/login"),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{children:[a?a.firstname+a.lastname:""," "]}),Object(p.jsxs)("h5",{children:["@",a?a.username:""]})]}),Object(p.jsxs)("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)("h2",{children:a?a.movies_count:0}),Object(p.jsx)("h4",{children:"Movies"})]}),Object(p.jsxs)("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)("a",{href:(a?a.username:"")+"/followers",children:Object(p.jsx)("h2",{children:a?a.followers_count:0})}),Object(p.jsx)("h4",{children:"Followers"})]}),Object(p.jsxs)("div",{style:{marginLeft:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsxs)("a",{href:(a?a.username:"")+"/following",children:[Object(p.jsx)("h2",{children:a?a.following_count:0})," "]}),Object(p.jsx)("h4",{children:"Following"})]})]}),Object(p.jsx)(S.a,{children:s&&s.length>0&&s.map((function(e){return Object(p.jsx)(C.a,{xs:6,md:4,children:Object(p.jsx)(F,{movie:e.movie,show:!1,review:e.review,rating:e.rating})})}))})]})},z=s(14),D=s(37),U=function(){var e=Object(u.g)().username,t=c.a.useState([]),s=Object(d.a)(t,2),n=s[0],r=s[1];c.a.useEffect((function(){console.log(typeof e);var t=v+"users/"+e+"/followers";f.a.get(t).then((function(e){console.log(e),r(e.data)}),(function(e){return console.log(e)}))}),[]);return Object(p.jsx)("div",{children:Object(p.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"#"}),Object(p.jsx)("th",{children:"First Name"}),Object(p.jsx)("th",{children:"Last Name"}),Object(p.jsx)("th",{children:"Username"})]})}),Object(p.jsx)("tbody",{children:n&&n.map((function(e,t){var s="/"+e.username;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t+1}),Object(p.jsx)("td",{children:e.firstname}),Object(p.jsx)("td",{children:e.lastname}),Object(p.jsx)("td",{children:Object(p.jsx)(z.b,{to:s,children:e.username})})]})}))})]})})},M=function(){var e=Object(u.g)().username,t=c.a.useState([]),s=Object(d.a)(t,2),n=s[0],r=s[1];c.a.useEffect((function(){console.log(typeof e);var t=v+"users/"+e+"/following";f.a.get(t).then((function(e){console.log(e),r(e.data)}),(function(e){return console.log(e)}))}),[]);return Object(p.jsx)("div",{children:Object(p.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"#"}),Object(p.jsx)("th",{children:"First Name"}),Object(p.jsx)("th",{children:"Last Name"}),Object(p.jsx)("th",{children:"Username"})]})}),Object(p.jsx)("tbody",{children:n&&n.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t+1}),Object(p.jsx)("td",{children:e.firstname}),Object(p.jsx)("td",{children:e.lastname}),Object(p.jsx)("td",{children:e.username})]})}))})]})})},R=function(){var e=Object(u.g)().username,t=c.a.useState([]),s=Object(d.a)(t,2),n=s[0],r=s[1],a={username:e,firstname:"firstname",lastname:"lastname",movies_count:0,followers_count:0,following_count:0},o=c.a.useState(a),i=Object(d.a)(o,2),l=i[0],j=i[1];return c.a.useEffect((function(){var t=v+"users/"+e;f.a.get(t).then((function(e){console.log(e),j(e.data[0])}),(function(e){return console.log(e)}));var s=v+"users/"+e+"/movielist";f.a.get(s).then((function(e){r(e.data),console.log(e)}),(function(e){console.log(e)}))}),[]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{children:[l?l.firstname+" "+l.lastname:""," "]}),Object(p.jsxs)("h5",{children:["@",l?l.username:""]})]}),Object(p.jsxs)("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)("h2",{children:l?l.movies_count:0}),Object(p.jsx)("h4",{children:"Movies"})]}),Object(p.jsxs)("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)("a",{href:(l?l.username:"")+"/followers",children:Object(p.jsx)("h2",{children:l?l.followers_count:0})}),Object(p.jsx)("h4",{children:"Followers"})]}),Object(p.jsxs)("div",{style:{marginLeft:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsxs)("a",{href:(l?l.username:"")+"/following",children:[Object(p.jsx)("h2",{children:l?l.following_count:0})," "]}),Object(p.jsx)("h4",{children:"Following"})]})]}),Object(p.jsx)(S.a,{children:n&&n.length>0&&n.map((function(e){return Object(p.jsx)(C.a,{xs:6,md:4,children:Object(p.jsx)(F,{movie:e.movie,show:!1,review:e.review,rating:e.rating})})}))})]})},P=function(){var e=x({userName:""}),t=Object(d.a)(e,2),s=t[0],n=t[1],r=(Object(u.f)(),c.a.useState(!1)),a=Object(d.a)(r,2),o=a[0],i=a[1],l=c.a.useState([]),j=Object(d.a)(l,2),O=j[0],m=j[1];return Object(p.jsxs)("div",{children:[Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),console.log(s.userName);var t=v+"users/"+s.userName;f.a.get(t).then((function(e){console.log(e.data),e.data.length>0?(m(e.data[0]),i(!0)):alert("No users found")}),(function(e){alert("Some error occured ! Try after some time"),console.log(e)}))},children:[Object(p.jsxs)(h.a.Group,{controlId:"userName",size:"lg",children:[Object(p.jsx)(h.a.Label,{children:"Enter the User Name"}),Object(p.jsx)(h.a.Control,{autoFocus:!0,type:"text",value:s.userName,onChange:n})]}),Object(p.jsx)(b.a,{type:"submit",disabled:!(s.userName.length>0),children:"Search"})]}),o&&Object(p.jsx)("div",{children:Object(p.jsxs)(N.a,{children:[Object(p.jsxs)(N.a.Header,{children:["@",O.username]}),Object(p.jsxs)(N.a.Body,{children:[Object(p.jsxs)(N.a.Title,{children:[O.firstname," ",O.lastname]}),Object(p.jsxs)(N.a.Text,{children:["Movies : ",O.movies_count]}),Object(p.jsxs)(N.a.Text,{children:["Followers : ",O.followers_count]}),Object(p.jsxs)(N.a.Text,{children:["Following : ",O.following_count]}),Object(p.jsx)(b.a,{variant:"primary",onClick:function(){var e="";O&&(e=O.username);var t=g("user_id");f.a.post("https://fast-falls-96051.herokuapp.com/users/follow",{userid:t,username:e}).then((function(e){e.data.error?alert(e.data.error):alert("Added successfully !"),console.log(e)}),(function(e){return console.log(e)}))},children:"Follow"})]})]})})]})};function A(){return Object(p.jsxs)(u.c,{children:[Object(p.jsx)(u.a,{exact:!0,path:"/",children:Object(p.jsx)(E,{})}),Object(p.jsx)(u.a,{path:"/:username/followers",children:Object(p.jsx)(U,{})}),Object(p.jsx)(u.a,{path:"/:username/following",children:Object(p.jsx)(M,{})}),Object(p.jsx)(u.a,{path:"/addmovie",children:Object(p.jsx)(T,{})}),Object(p.jsx)(u.a,{path:"/login",children:Object(p.jsx)(w,{})}),Object(p.jsx)(u.a,{path:"/signup",children:Object(p.jsx)(L,{})}),Object(p.jsx)(u.a,{path:"/addfollower",children:Object(p.jsx)(P,{})}),Object(p.jsx)(u.a,{path:"/:username",children:Object(p.jsx)(R,{})}),Object(p.jsx)(u.a,{children:Object(p.jsx)(G,{})})]})}var B=s(33),Y=s(28);function H(){var e=c.a.useState(!1),t=Object(d.a)(e,2),s=t[0],r=t[1],a=Object(u.f)(),i=Object(o.b)(),l=Object(o.c)((function(e){return e.userReducer.user}));Object(n.useEffect)((function(){g("user_id")?r(!0):r(!1),console.log("hojo")}),[l]);return Object(p.jsxs)("div",{className:"App container py-3",children:[Object(p.jsxs)(B.a,{collapseOnSelect:!0,bg:"light",expand:"md",className:"mb-3",children:[Object(p.jsx)(B.a.Brand,{href:"/",className:"font-weight-bold text-muted",children:"My Movie List"}),Object(p.jsx)(B.a.Toggle,{}),Object(p.jsx)(B.a.Collapse,{className:"justify-content-end",children:Object(p.jsxs)(Y.a,{children:[!s&&Object(p.jsx)(Y.a.Link,{href:"/signup",children:"Signup"}),!s&&Object(p.jsx)(Y.a.Link,{href:"/login",children:"Login"}),s&&Object(p.jsx)(Y.a.Link,{href:"/addfollower",children:"Find Friend"}),s&&Object(p.jsx)(Y.a.Link,{href:"/addmovie",children:"Add Movie"}),s&&Object(p.jsx)(Y.a.Link,{onClick:function(){r(!1),document.cookie="user_id=",document.cookie="username=",i({type:"LOG_OUT",status:"failure"}),a.push("/login")},children:"Logout"})]})})]}),Object(p.jsx)(A,{})]})}var J=s(103),W=s(61),q=Object(i.createStore)(j,Object(W.composeWithDevTools)()),K=document.getElementById("root");a.a.render(Object(p.jsx)(J.a,{children:Object(p.jsx)(z.a,{children:Object(p.jsx)(o.a,{store:q,children:Object(p.jsx)(H,{})})})}),K)},73:function(e,t,s){},74:function(e,t,s){}},[[100,1,2]]]);
//# sourceMappingURL=main.49df7e7e.chunk.js.map